(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{162:function(e,t,n){e.exports=n(271)},271:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),s=n(67),o=n.n(s),c=n(8),i=n(44),u=n(135),l=n(10),d=n(7),b=n.n(d),p=n(16),m=n(20),g=n(33),f=function(e){var t=e.email,n=e.password;return m.a.post("/api/session",{json:{email:t,password:n}}).json()},x=function(e){var t=e.username,n=e.email,r=e.password;return m.a.post("/api/users",{json:{username:t,email:n,password:r}}).json()},h=function(e,t){try{localStorage.setItem(e,JSON.stringify(t))}catch(n){console.log(n)}},j=Object(g.b)({name:"auth",initialState:{},reducers:{signUpStart:function(e){e.pending=!0,e.signUpError=null},signUpSuccess:function(e,t){var n=t.payload;e.currentUser=n,e.pending=!1,e.signUpError=null},signUpFailure:function(e,t){e.pending=!1,e.signUpError=t.payload},signInStart:function(e){e.pending=!0,e.signInError=null},signInSuccess:function(e,t){var n=t.payload;e.currentUser=n,e.pending=!1,e.signInError=null},signInFailure:function(e,t){e.pending=!1,e.signInError=t.payload}}}),v=j.actions,O=v.signUpStart,k=v.signUpSuccess,y=v.signUpFailure,S=v.signInStart,w=v.signInSuccess,I=v.signInFailure,E=function(e){var t;return null===(t=e.auth.currentUser)||void 0===t?void 0:t.token},T=function(e){var t;return null===(t=e.auth.signInError)||void 0===t?void 0:t.messages[0]},N=function(e){var t;return null===(t=e.auth.signUpError)||void 0===t?void 0:t.messages[0]},U=j.reducer,F=n(58),W=n(6),C=n(13),R=Object(g.b)({name:"tasks",initialState:{byId:{},ids:[],loading:!1,error:null},reducers:{getTasksStart:function(e){e.loading=!0,e.error=null},getTasksSuccess:function(e,t){var n=t.payload,r=n.tasksById,a=n.taskIds;e.byId=r,e.ids=a,e.loading=!1,e.error=null},getTasksFailure:function(e,t){e.loading=!1,e.error=t.payload},addTask:function(e,t){var n=t.payload,r=n.id,a=n.text;e.byId[r]={id:r,text:a,completed:!1},e.ids.push(r)},addTaskStart:function(e,t){var n=t.payload.id;e.byId[n].syncing=!0,e.byId[n].error=null},addTaskSuccess:function(e,t){var n=t.payload,r=n.id;e.byId[r]=Object(C.a)(Object(C.a)({},e.byId[r]),n),e.byId[r].syncing=!1,e.byId[r].error=null},addTaskFailure:function(e,t){var n=t.payload,r=n.id;e.byId[r].syncing=!1,e.byId[r].error=n}}}),z=R.actions,H=z.addTask,G=z.getTasksStart,L=z.getTasksSuccess,P=z.getTasksFailure,q=z.addTaskSuccess,A=R.reducer,B=n(127),D=n(130),J=(Object(D.createLogger)({predicate:function(e,t){return!t.type.startsWith("@@redux-form")}}),Object(F.a)(Object(g.c)()));var M=Object(W.c)({tasks:A,form:B.a,auth:U}),K=Object(g.a)({reducer:function(e,t){return"logout"===t.type&&(localStorage.removeItem("user"),e=void 0),M(e,t)},preloadedState:{auth:{currentUser:function(e){try{var t=localStorage.getItem(e);if(null===t)return;return JSON.parse(t)}catch(n){return}}("user")}},middleware:J}),$=m.a.extend({hooks:{beforeRequest:[function(e){var t=E(K.getState());t&&e.headers.set("Authorization",'Token token="'+t+'"')}]}}),Q=function(e){var t=e.id,n=e.text;return $.post("/api/tasks",{json:{id:t,text:n}}).json()},V=n(132),X=n(93),Y=[new X.b.Entity("tasks")],Z=n(125),_=n(50),ee=n(126),te=Object(ee.a)({form:"taskForm"})(Object(l.b)(null,(function(e){return{reset:function(){return e(Object(_.a)("taskForm"))}}}))((function(e){var t=e.handleSubmit,n=e.reset;return Object(c.c)("form",{onSubmit:t},Object(c.c)(Z.a,{component:"textarea",name:"taskText",rows:3,onKeyDown:function(e){return function(t){13===t.keyCode&&(t.preventDefault(),e(),n())}}(t),sx:{width:"100%",borderRadius:4,borderColor:"n.4",p:2,outline:"none"}}))}))),ne=n(9),re=Object(l.b)((function(e){return{token:E(e)}}))((function(e){var t=e.token,n=e.children;return t?a.a.createElement(a.a.Fragment,null,n):a.a.createElement(ne.a,{to:"/signin"})})),ae=function(e){var t=e.id,n=e.text;return Object(c.c)("div",{sx:{borderBottom:"1px solid #000",borderColor:"n.6",py:3,mb:2},key:t},n)},se=Object(l.b)((function(e){var t,n=e.tasks;return{tasks:(t=n,t.ids.map((function(e){return t.byId[e]})))}}))((function(e){var t=e.tasks,n=Object(l.c)(),a=Object(u.b)(),s=Object(i.a)(a,2),o=s[0],d=s[1];Object(r.useEffect)((function(){n(function(){var e=Object(p.a)(b.a.mark((function e(t){var n,r,a,s,o,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(G()),e.next=4,$.get("/api/tasks").json();case 4:n=e.sent,r=Object(X.a)(n,Y),a=r.entities,s=r.result,o=a.tasks||{},t(L({tasksById:o,taskIds:s})),e.next=20;break;case 11:if(e.prev=11,e.t0=e.catch(0),e.t0 instanceof m.a.HTTPError){e.next=15;break}throw e.t0;case 15:return e.next=17,e.t0.response.json();case 17:c=e.sent,t(P(c)),console.error("getTasksFailure:",c);case 20:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())}),[n]);return Object(c.c)(re,null,Object(c.c)("button",{onClick:function(e){d("default"===o?"dark":"default")}},"default"===o?"Dark":"Light"," theme"),Object(c.c)("button",{onClick:function(){n({type:"logout"})}},"Log out"),Object(c.c)("div",{sx:{px:8},className:"tasks"},t.map((function(e){return Object(c.c)(ae,{key:e.id,id:e.id,text:e.text})})),Object(c.c)(te,{onSubmit:function(e){var t,r=e.taskText;n((t={text:r},function(){var e=Object(p.a)(b.a.mark((function e(n){var r,a,s,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=t.text,a=Object(V.v4)(),n(H({id:a,text:r})),e.next=6,Q({id:a,text:r});case 6:s=e.sent,n(q({id:s.id,text:s.text})),e.next=19;break;case 10:if(e.prev=10,e.t0=e.catch(0),e.t0 instanceof m.a.HTTPError){e.next=14;break}throw e.t0;case 14:return e.next=16,e.t0.response.json();case 16:o=e.sent,n(P(o)),console.error("addTaskFailure:",o);case 19:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()))}})))})),oe=function(){return Object(c.c)(re,null,Object(c.c)(se,null))},ce=n(272),ie=n(23),ue=n(72),le=n.n(ue),de={mb:4},be={maxWidth:13,backgroundColor:"n.10",mx:"auto",mt:7,p:5,borderRadius:5,boxShadow:0},pe={pb:1,mb:4},me={mb:1,fontWeight:2,color:"n.2"},ge={p:2,borderRadius:3,borderColor:"n.5",backgroundColor:"n.8"},fe={width:"100%",backgroundColor:"prime.2",fontSize:1,fontWeight:3,p:3,mb:3,outline:"none",cursor:"pointer"},xe={width:4,mr:1},he=function(e){var t=e.input,n=e.label,r=e.type,a=e.meta,s=a.touched,o=a.error;return Object(c.c)("div",null,Object(c.c)(ce.c,{className:"inputLabel",sx:me},n),Object(c.c)(ce.b,Object.assign({},t,{type:r,className:"loginInput",sx:ge})),s&&o&&Object(c.c)("span",null,o))},je=Object(ee.a)({form:"signIn",validate:function(e){var t={};return e.email||(t.email="Required"),e.password||(t.password="Required"),t}})((function(e){var t=e.handleSubmit,n=e.err;return Object(c.c)("form",{sx:be,onSubmit:t},Object(c.c)("div",{className:"loginHeader",sx:de},Object(c.c)("div",{sx:{mb:1,fontSize:3,fontWeight:2,color:"n.2"}},"Tasski"),Object(c.c)("div",{sx:{fontSize:6,fontWeight:3,color:"n.1"}},"Log in")),n&&Object(c.c)("div",{sx:{color:"danger.2",mb:2}},Object(c.c)("img",{src:le.a,sx:xe,className:"alert",alt:"alert"}),Object(c.c)("span",{sx:{lineHeight:2}}," ",n)),Object(c.c)("div",{className:"fieldGroup",sx:pe},Object(c.c)(Z.a,{name:"email",type:"email",label:"Email",component:he})),Object(c.c)("div",{className:"fieldGroup",sx:pe},Object(c.c)(Z.a,{name:"password",type:"password",label:"Password",component:he})),Object(c.c)(ce.a,{sx:fe},"LOG IN"),Object(c.c)("div",{sx:{textAlign:"center"}},"Don' t have an account? ",Object(c.c)(ie.b,{to:"/signup"},"Sign Up")))})),ve=Object(l.b)((function(e){return{token:E(e),error:T(e)}}))((function(e){var t=e.token,n=e.error,r=Object(l.c)();return t?a.a.createElement(ne.a,{to:"/"}):a.a.createElement(je,{onSubmit:function(e){return r(function(e){var t=e.email,n=e.password;return(function(){var e=Object(p.a)(b.a.mark((function e(r){var a,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r(S()),e.next=4,f({email:t,password:n});case 4:a=e.sent,r(w(a)),h("user",a),e.next=17;break;case 9:if(e.prev=9,e.t0=e.catch(0),e.t0 instanceof m.a.HTTPError){e.next=13;break}throw e.t0;case 13:return e.next=15,e.t0.response.json();case 15:s=e.sent,r(I(s));case 17:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}(e))},err:n})})),Oe={mb:4},ke={maxWidth:13,backgroundColor:"n.10",mx:"auto",mt:7,p:5,borderRadius:5,boxShadow:0},ye={pb:1,mb:4},Se={mb:1,fontWeight:2,color:"n.2"},we={p:2,borderRadius:3,borderColor:"n.5",backgroundColor:"n.8"},Ie={width:"100%",backgroundColor:"prime.2",fontSize:1,fontWeight:3,p:3,mb:3,outline:"none",cursor:"pointer"},Ee={width:4,mr:1},Te=function(e){var t=e.input,n=e.label,r=e.type,a=e.meta,s=a.touched,o=a.error;return Object(c.c)("div",null,Object(c.c)(ce.c,{className:"inputLabel",sx:Se},n),Object(c.c)(ce.b,Object.assign({},t,{type:r,className:"loginInput",sx:we})),s&&o&&Object(c.c)("span",null,o))},Ne=Object(ee.a)({form:"signIn",validate:function(e){var t={};return e.username||(t.username="Required"),e.email||(t.email="Required"),e.password||(t.password="Required"),t}})((function(e){var t=e.handleSubmit,n=e.err;return Object(c.c)("form",{sx:ke,onSubmit:t},Object(c.c)("div",{className:"loginHeader",sx:Oe},Object(c.c)("div",{sx:{mb:1,fontSize:3,fontWeight:2,color:"n.2"}},"Tasski"),Object(c.c)("div",{sx:{fontSize:6,fontWeight:3,color:"n.1"}},"Sign up")),n&&Object(c.c)("div",{sx:{color:"danger.2",mb:2}},Object(c.c)("img",{src:le.a,sx:Ee,className:"alert",alt:"alert"}),Object(c.c)("span",{sx:{lineHeight:2}}," ",n)),Object(c.c)("div",{className:"fieldGroup",sx:ye},Object(c.c)(Z.a,{name:"username",type:"username",label:"Username",component:Te})),Object(c.c)("div",{className:"fieldGroup",sx:ye},Object(c.c)(Z.a,{name:"email",type:"email",label:"Email",component:Te})),Object(c.c)("div",{className:"fieldGroup",sx:ye},Object(c.c)(Z.a,{name:"password",type:"password",label:"Password",component:Te})),Object(c.c)(ce.a,{sx:Ie},"SIGN UP"),Object(c.c)("div",{sx:{textAlign:"center"}},"Already signed up? Go to ",Object(c.c)(ie.b,{to:"/signin"},"Login")))})),Ue=Object(l.b)((function(e){return{token:E(e),error:N(e)}}))((function(e){var t=e.token,n=e.error,r=Object(l.c)();return t?a.a.createElement(ne.a,{to:"/"}):a.a.createElement(Ne,{onSubmit:function(e){return r(function(e){var t=e.username,n=e.email,r=e.password;return(function(){var e=Object(p.a)(b.a.mark((function e(a){var s,o;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a(O()),e.next=4,x({username:t,email:n,password:r});case 4:s=e.sent,a(k(s)),h("user",s),e.next=17;break;case 9:if(e.prev=9,e.t0=e.catch(0),e.t0 instanceof m.a.HTTPError){e.next=13;break}throw e.t0;case 13:return e.next=15,e.t0.response.json();case 15:o=e.sent,a(y(o));case 17:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())}(e))},err:n})})),Fe=function(){return Object(c.c)("div",{sx:{height:"100vh",p:6,fontSize:2,fontFamily:"body",bg:"n.9"},className:"App"},Object(c.c)(ne.d,null,Object(c.c)(ne.b,{path:"/signin",component:ve}),Object(c.c)(ne.b,{path:"/signup",component:Ue}),Object(c.c)(ne.b,{exact:!0,path:"/",component:oe})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var We=n(273),Ce='"Avenir Next", -apple-system, BlinkMacSystemFont, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", sans-serif',Re={body:Ce,heading:Ce,monospace:"Menlo, monospace"},ze=[0,4,8,12,16,24,32,48,64,96,128,192,256,384,512,640,768],He=ze,Ge=[10,12,14,16,18,20,24,30,36,48,60,72];Ge.body=Ge[2],Ge.display=Ge[5];var Le=["rgb(96, 25, 26)","rgb(135, 38, 31)","rgb(181, 34, 38)","rgb(218, 50, 54)","rgb(226, 101, 103)","rgb(241, 169, 170)","rgb(251, 232, 232)"],Pe=["hsl(213deg 12% 15%)","hsl(210deg 10% 23%)","hsl(187deg 5% 30%)","hsl(210deg 7% 56%)","hsl(210deg 11% 71%)","hsl(210deg 14% 83%)","hsl(210deg 14% 89%)","hsl(210deg 16% 93%)","hsl(210deg 17% 95%)","hsl(210deg 17% 98%)","hsl(210deg 17% 100%)"],qe=["hsl(179deg 53% 18%)","hsl(174deg 53% 26%)","hsl(174deg 50% 38%)","hsl(174deg 45% 47%)","hsl(177deg 56% 65%)","hsl(176deg 67% 80%)","hsl(177deg 100% 95%)"],Ae=["rgb(23, 80, 56)","rgb(31, 118, 67)","rgb(45, 156, 90)","rgb(64, 192, 117)","rgb(120, 216, 161)","rgb(170, 237, 194)","rgb(228, 252, 236)"],Be={text:Pe[5],background:Pe[0],primary:qe[2],neutral:Pe,n:Pe,prime:Le,accent:qe,accent2:Ae,danger:Le},De={text:Pe[0],background:Pe[5],primary:qe[2],neutral:Pe,prime:Le,n:Pe,accent:qe,accent2:Ae,danger:Le},Je={fonts:Re,colors:Object(C.a)(Object(C.a)({},De),{},{modes:{dark:Be}}),sizes:He,space:ze,fontSizes:Ge,fontWeights:[400,500,600,700],borderWidths:[0,1,2,3,4,5,6],radii:[0,2,3,4,6,8,12,16],letterSpacings:[.5,1,2],shadows:["0 1px 3px hsla(0,0%,0%,.2)","0 4px 6px hsla(0,0%,0%,.2)","0 5px 15px hsla(0,0%,0%,.2)","0 10px 24px hsla(0,0%,0%,.2)","0 15px 35px hsla(0,0%,0%,.2)","0 1px 3px hsla(0,0%,0%,.12),0 1px 2px hsla(0,0%,0%,.24)","0 3px 6px hsla(0,0%,0%,.15),0 2px 4px hsla(0,0%,0%,.12)","0 3px 6px hsla(0,0%,0%,.10),0 10px 20px hsla(0,0%,0%,.15)","0 15px 25px hsla(0,0%,0%,.15),0 5px 10px hsla(0,0%,0%,.5)","0 20px 40px hsla(0,0%,0%,.2)"]};o.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(l.a,{store:K},a.a.createElement(We.a,{theme:Je},a.a.createElement(ie.a,null,a.a.createElement(Fe,null))))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},72:function(e,t,n){e.exports=n.p+"static/media/alert.75219400.svg"}},[[162,1,2]]]);
//# sourceMappingURL=main.7fe1f3db.chunk.js.map