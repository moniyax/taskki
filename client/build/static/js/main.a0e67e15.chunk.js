(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{144:function(e,t,a){e.exports=a(253)},149:function(e,t,a){},253:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(49),o=a.n(s),c=(a(149),a(13)),i=a(7),u=a.n(i),d=a(14),l=a(9),f=a(55),k=a(112),m=a(36),p=function(e){var t=e.id,a=e.text;return m.a.post("/api/tasks",{json:{id:t,text:a}}).json()},b=a(77),v=[new b.b.Entity("tasks")],y=Object(f.b)({name:"tasks",initialState:{byId:{},ids:[],loading:!1,error:null},reducers:{getTasksStart:function(e){e.loading=!0,e.error=null},getTasksSuccess:function(e,t){var a=t.payload,n=a.tasksById,r=a.taskIds;e.byId=n,e.ids=r,e.loading=!1,e.error=null},getTasksFailure:function(e,t){e.loading=!1,e.error=t.payload},addTask:function(e,t){var a=t.payload,n=a.id,r=a.text;e.byId[n]={id:n,text:r,completed:!1},e.ids.push(n)},addTaskStart:function(e,t){var a=t.payload.id;e.byId[a].syncing=!0,e.byId[a].error=null},addTaskSuccess:function(e,t){var a=t.payload,n=a.id;e.byId[n]=Object(l.a)(Object(l.a)({},e.byId[n]),a),e.byId[n].syncing=!1,e.byId[n].error=null},addTaskFailure:function(e,t){var a=t.payload,n=a.id;e.byId[n].syncing=!1,e.byId[n].error=a}}}),g=y.actions,x=g.addTask,T=g.getTasksStart,h=g.getTasksSuccess,w=g.getTasksFailure,I=g.addTaskSuccess,j=y.reducer,E=a(108),O=a(74),S=a(109),F=Object(S.a)({form:"taskForm"})(Object(c.b)(null,(function(e){return{reset:function(){return e(Object(O.a)("taskForm"))}}}))((function(e){var t=e.handleSubmit,a=e.reset;return r.a.createElement("form",{onSubmit:t},r.a.createElement(E.a,{component:"textarea",name:"taskText",cols:" ",rows:" ",onKeyDown:function(e){return function(t){13===t.keyCode&&(t.preventDefault(),e(),a())}}(t)}))}))),q=Object(c.b)((function(e){var t,a=e.tasks;return{tasks:(t=a,t.ids.map((function(e){return t.byId[e]})))}}),(function(e){return{addTaskRequest:function(t){return e((a=t,function(){var e=Object(d.a)(u.a.mark((function e(t){var n,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=a.text,r=Object(k.v4)(),t(x({id:r,text:n})),e.next=6,p({id:r,text:n});case 6:s=e.sent,t(I({id:s.id,text:s.text,offline:!1})),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),t(w()),console.error("addTaskFailure:",e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()));var a},getTasksRequest:function(){return e(function(){var e=Object(d.a)(u.a.mark((function e(t){var a,n,r,s,o;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(T()),e.next=4,m.a.get("/api/tasks").json();case 4:a=e.sent,n=Object(b.a)(a,v),r=n.entities,s=n.result,o=r.tasks,t(h({tasksById:o,taskIds:s})),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),t(w()),console.error("getTasksFailure:",e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}())}}}))((function(e){var t=e.addTaskRequest,a=e.tasks,s=e.getTasksRequest;Object(n.useEffect)((function(){s()}),[s]);return r.a.createElement("div",{className:"tasks"},a.map((function(e){return r.a.createElement("div",{key:e.id},e.text)})),r.a.createElement("div",null),r.a.createElement(F,{onSubmit:function(e){var a=e.taskText;t({text:a})}}))}));var B=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(q,null))},R=a(110);window.ky=m.a;var N=Object(f.a)({reducer:{tasks:j,form:R.a}});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var A=a(255);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(c.a,{store:N},r.a.createElement(A.a,{theme:{fonts:{body:"system-ui, sans-serif",heading:'"Avenir Next", sans-serif',monospace:"Menlo, monospace"},colors:{text:"#fff",background:"#363537",primary:"#33e"}}},r.a.createElement(B,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[144,1,2]]]);
//# sourceMappingURL=main.a0e67e15.chunk.js.map